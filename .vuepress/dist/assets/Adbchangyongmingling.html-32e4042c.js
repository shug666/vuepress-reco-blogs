import{_ as t,r as e,o as d,c as r,b as s,d as a,e as l,a as p}from"./app-52856ff7.js";const i={},o=p(`<h2 id="_1-列出当前连接的android设备信息" tabindex="-1"><a class="header-anchor" href="#_1-列出当前连接的android设备信息" aria-hidden="true">#</a> 1 列出当前连接的Android设备信息</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb devices <span class="token comment"># 获取当前连接的设备</span>
adb shell getprop  <span class="token comment"># 查看android设备的参数信息</span>
adb shell <span class="token function">cat</span> /proc/cpuinfo <span class="token comment"># 查看CPU架构信息</span>
adb shell getprop ro.build.version.release <span class="token comment"># 查看系统Android版本信息</span>
adb shell getprop ro.build.version.sdk <span class="token comment"># 查看系统API版本信息</span>
adb shell <span class="token function">df</span> <span class="token comment"># 获取手机磁盘空间</span>
adb shell dumpsys procstats <span class="token comment"># 获取当前内存使用信息</span>
adb shell dumpsys gfxinfo <span class="token comment"># 获取当前的制图状态</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-获取设置设备屏幕分辨率" tabindex="-1"><a class="header-anchor" href="#_2-获取设置设备屏幕分辨率" aria-hidden="true">#</a> 2 获取设置设备屏幕分辨率</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell wm <span class="token builtin class-name">help</span> <span class="token comment"># 可查看所有可用的wm指令</span>
adb shell wm size <span class="token comment"># 获取当前分辨率</span>
adb shell wm density <span class="token comment"># 获取当前像素密度(dpi)</span>
adb shell wm size <span class="token number">720</span>*1080 <span class="token comment">#将分辨率修改为720*1080</span>
adb shell wm density <span class="token number">240</span> <span class="token comment"># 将dpi修改为240</span>
adb shell wm size reset <span class="token comment"># 重置分辨率</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-文件拷贝" tabindex="-1"><a class="header-anchor" href="#_3-文件拷贝" aria-hidden="true">#</a> 3 文件拷贝</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb push <span class="token operator">&lt;</span>本地路径<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>远程路径<span class="token operator">&gt;</span> <span class="token comment"># 从电脑上发送文件到设备 【adb push media /sdcard/ 把media文件夹整个拷贝到sd卡根目录】</span>
adb pull <span class="token operator">&lt;</span>远程路径<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>本地路径<span class="token operator">&gt;</span> <span class="token comment"># 从设备下载文件到电脑 【adb pull /system/media D:/ 把设备中的media目录整个拷贝到D盘】</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-抓取日志信息" tabindex="-1"><a class="header-anchor" href="#_4-抓取日志信息" aria-hidden="true">#</a> 4 抓取日志信息</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb logcat <span class="token comment"># 打印android的系统日志，使用ctrl+c 可停止打印</span>
adb shell <span class="token string">&quot;logcat &gt;/sdcard/log000.log&quot;</span>  <span class="token comment">#把日志信息保存到sd卡根目录的log000.log目录</span>
adb logcat <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">&quot;^..MyApp\\|^..MyActivity&quot;</span> <span class="token comment"># 使用 grep 配合正则表达式进行过滤，只显示需要的输出（白名单）</span>
adb logcat <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-vE</span> <span class="token string">&quot;^..MyApp\\|^..MyActivity&quot;</span> <span class="token comment"># 使用 grep 配合正则表达式进行过滤，过滤不需要的输出（黑名单）</span>
adb logcat <span class="token parameter variable">-c</span> <span class="token operator">&amp;&amp;</span> adb logcat <span class="token comment"># logcat 有缓存，如果仅需要查看当前开始的 log，需要清空之前的缓存</span>
<span class="token function">cat</span> myapp.log <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">&quot;^..MyApp|^..MyActivity&quot;</span> <span class="token operator">&gt;</span> newmyapp.log <span class="token comment"># 例如 log 文件为 myapp.log，要匹配 tag 为 MyApp 和 MyActivity 的输出，然后输出到 newmyapp.log</span>

adb logcat <span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span><span class="token punctuation">[</span>:priority<span class="token punctuation">]</span> tag表示标签，priority输出的级别
V —— Verbose（最低，输出得最多）
D —— Debug
I —— Info
W —— Warning
E —— Error
F —— Fatal
S —— Silent（最高，啥也不输出）

日志默认级别是V，如果错误日志我们选择E就可以。
//格式1：打印默认日志数据
adb logcat
//格式2：需要打印日志详细时间的简单数据
adb logcat <span class="token parameter variable">-v</span> <span class="token function">time</span>
//格式3：需要打印级别为Error的信息
adb logcat *:E
//格式4：需要打印时间和级别是Error的信息
adb logcat <span class="token parameter variable">-v</span> <span class="token function">time</span> *:E
//格式5：将日志保存到电脑固定的位置，比如D:<span class="token punctuation">\\</span>log.txt
adb logcat <span class="token parameter variable">-v</span> <span class="token function">time</span> <span class="token operator">&gt;</span>D:<span class="token punctuation">\\</span>log.txt
// 开机日志的获取
adb logcat <span class="token parameter variable">-b</span> main <span class="token parameter variable">-b</span> system <span class="token parameter variable">-b</span> radio <span class="token parameter variable">-b</span> events <span class="token parameter variable">-v</span> <span class="token function">time</span> <span class="token operator">&gt;</span> bootLog.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-显示手机里所有正在运行的进程。" tabindex="-1"><a class="header-anchor" href="#_5-显示手机里所有正在运行的进程。" aria-hidden="true">#</a> 5 显示手机里所有正在运行的进程。</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> adb shell <span class="token function">ps</span> <span class="token parameter variable">-A</span> <span class="token operator">|</span> <span class="token function">grep</span> ** <span class="token comment"># 使用正则进行过滤</span>
 adb shell <span class="token function">ps</span> <span class="token parameter variable">-t</span> -x,-P,-p,-c <span class="token punctuation">[</span>pid<span class="token operator">|</span>name<span class="token punctuation">]</span> <span class="token comment"># 配置一些额外的参数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>t显示进程下的线程列表</li><li>x 显示进程耗费的用户时间和系统时间，单位s</li><li>P 显示调度策略，通过是bg or fg ，当获取失败将会un和er比之前打印的内容多出了一列PCY，表示进程的调度等级</li><li>p 显示进程的优先级和nice等级</li><li>c 显示进程耗费的CPU时间</li><li>[PID]过滤指定进程PID，[name]过滤指定进程NAME</li></ul><h2 id="_6-获取设备root权限-修改设备磁盘权限" tabindex="-1"><a class="header-anchor" href="#_6-获取设备root权限-修改设备磁盘权限" aria-hidden="true">#</a> 6 获取设备root权限，修改设备磁盘权限</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb root <span class="token comment"># 获取root权限</span>
adb remount <span class="token comment"># 挂载系统文件系统为可读写状态，显示**remount succeeded**就代表命令执行成功；</span>
<span class="token comment"># adb shell mount -o rw,remount /</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-屏幕操作" tabindex="-1"><a class="header-anchor" href="#_7-屏幕操作" aria-hidden="true">#</a> 7 屏幕操作</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell screencap <span class="token parameter variable">-p</span> /sdcard/screen.jpg <span class="token comment"># 对屏幕进行截屏</span>
adb shell screenrecord sdcard/record.mp4 <span class="token comment"># 对屏幕进行录像</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-显示和隐藏下拉状态栏" tabindex="-1"><a class="header-anchor" href="#_8-显示和隐藏下拉状态栏" aria-hidden="true">#</a> 8 显示和隐藏下拉状态栏</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell <span class="token function">service</span> call statusbar <span class="token number">1</span> <span class="token comment">#显示下拉状态栏</span>
adb shell <span class="token function">service</span> call statusbar <span class="token number">2</span> <span class="token comment">#隐藏下拉状态栏</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-获取设置应用的数据库数据列表" tabindex="-1"><a class="header-anchor" href="#_9-获取设置应用的数据库数据列表" aria-hidden="true">#</a> 9 获取设置应用的数据库数据列表</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell settings list global
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_10-安装apk文件" tabindex="-1"><a class="header-anchor" href="#_10-安装apk文件" aria-hidden="true">#</a> 10 安装apk文件</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb <span class="token function">install</span> <span class="token operator">&lt;</span>软件名<span class="token operator">&gt;</span> <span class="token comment"># 这个命令将指定的apk文件安装到设备上</span>
adb <span class="token function">install</span> <span class="token parameter variable">-r</span> <span class="token operator">&lt;</span>软件名<span class="token operator">&gt;</span> <span class="token comment"># 替换已存在的应用程序，也就是说强制安装</span>
adb <span class="token function">install</span> <span class="token parameter variable">-l</span> <span class="token operator">&lt;</span>软件名<span class="token operator">&gt;</span> <span class="token comment"># 锁定该应用程序</span>
adb <span class="token function">install</span> <span class="token parameter variable">-t</span> <span class="token operator">&lt;</span>软件名<span class="token operator">&gt;</span> <span class="token comment"># 允许测试包</span>
adb <span class="token function">install</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;</span>软件名<span class="token operator">&gt;</span> <span class="token comment"># 把应用程序安装到sd卡上</span>
adb <span class="token function">install</span> <span class="token parameter variable">-d</span> <span class="token operator">&lt;</span>软件名<span class="token operator">&gt;</span> <span class="token comment"># 允许进行将见状，也就是安装的比手机上带的版本低</span>
adb <span class="token function">install</span> <span class="token parameter variable">-g</span> <span class="token operator">&lt;</span>软件名<span class="token operator">&gt;</span> <span class="token comment"># 为应用程序授予所有运行时的权限</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="pm常用指令" tabindex="-1"><a class="header-anchor" href="#pm常用指令" aria-hidden="true">#</a> PM常用指令</h2><blockquote><p>pm即package manager，使用pm命令可以去模拟android行为或者查询设备上的应用信息等</p></blockquote><table><thead><tr><th>命令</th><th>功能</th><th>实现方法</th></tr></thead><tbody><tr><td>dump</td><td>dump信息</td><td>AM.dumpPackageStateStatic</td></tr><tr><td>clear</td><td>清空App数据</td><td>AMS.clearApplicationUserData</td></tr><tr><td>uninstall [options]</td><td>卸载应用</td><td>IPackageInstaller.uninstall</td></tr><tr><td>force-dex-opt</td><td>dex优化</td><td>PMS.forceDexOpt</td></tr><tr><td>trim-caches &lt;目标size&gt;</td><td>紧缩cache目标大小</td><td>PMS.freeStorageAndNotify</td></tr><tr><td>list packages</td><td>列举app包信息</td><td>PMS.getInstalledPackages</td></tr><tr><td>get-install-location</td><td>获取安装位置</td><td>PMS.getInstallLocation</td></tr><tr><td>path</td><td>查看App路径</td><td>PMS.getPackageInfo</td></tr><tr><td>install [options]</td><td>安装应用</td><td>PMS.installPackageAsUser</td></tr><tr><td>hide</td><td>隐藏应用</td><td>PMS.setApplicationHiddenSettingAsUser</td></tr><tr><td>unhide</td><td>显示应用</td><td>PMS.setApplicationHiddenSettingAsUser</td></tr><tr><td>enable &lt;包名或组件名&gt;</td><td>激活包名或组件</td><td>PMS.setEnabledSetting</td></tr><tr><td>disable &lt;包名或组件名&gt;</td><td>禁用包名或组件</td><td>PMS.setEnabledSetting</td></tr><tr><td>set-install-location</td><td>设置安装位置</td><td>PMS.setInstallLocation</td></tr><tr><td>get-max-users</td><td>最大用户数</td><td>UserManager.getMaxSupportedUsers</td></tr></tbody></table><h2 id="_11-获取安装的应用包名信息" tabindex="-1"><a class="header-anchor" href="#_11-获取安装的应用包名信息" aria-hidden="true">#</a> 11 获取安装的应用包名信息</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell pm list package <span class="token comment"># 列出所有的应用的包名</span>
adb shell pm list package <span class="token parameter variable">-s</span> <span class="token comment"># 列出系统应用</span>
adb shell pm list package <span class="token parameter variable">-3</span> <span class="token comment"># 列出第三方应用</span>
adb shell pm list package <span class="token parameter variable">-f</span> <span class="token comment"># 列出项目包名及对应的apk名及存放位置</span>
adb shell pm list package <span class="token parameter variable">-i</span> <span class="token comment"># 列出应用包名及其安装来源</span>
adb shell pm path com.ztf.coaster <span class="token comment"># 列出对应包名的apk位置</span>
adb shell pm dump com.ztf.coaster <span class="token comment"># 列出应用的转储信息</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-卸载apk文件" tabindex="-1"><a class="header-anchor" href="#_12-卸载apk文件" aria-hidden="true">#</a> 12 卸载apk文件</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb uninstall <span class="token operator">&lt;</span>软件名<span class="token operator">&gt;</span> <span class="token comment"># 卸载软件</span>
adb uninstall <span class="token parameter variable">-k</span> <span class="token operator">&lt;</span>软件名<span class="token operator">&gt;</span> <span class="token comment"># 卸载软件 但是保留配置和缓存文件</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>拥有root权限：</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb root  <span class="token comment">#在终端输入该命令获得root权限。</span>
adb remount <span class="token comment"># 重新挂载，获得对读写权限。</span>
adb shell <span class="token comment">#进入adb命令环境。</span>
<span class="token builtin class-name">cd</span> /system/app <span class="token comment"># 切换到 /system/app 目录，一般系统apk都安装在这个目录。</span>
<span class="token function">ls</span> <span class="token comment"># 查看目前所有已安装的系统apk。</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> Browser.apk  <span class="token comment"># 卸载系统apk。此时可以从桌面看到浏览器已经别卸载了</span>
<span class="token function">reboot</span>  <span class="token comment"># 重启设备，才能生效。此时已经删掉了APK,如果不重启进行安装同个APK,是没办法安装成功，已经安装的信息还存在。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>没有root权限：</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb uninstall 包名		<span class="token comment"># 卸载包名所对应的软件</span>
adb shell pm uninstall <span class="token parameter variable">--user</span> <span class="token number">0</span>  包名 <span class="token comment"># 如果adb uninstall没有用，可以使用这个，表示删除用户空间0的应用。这跟卸载普通应用是同个方式</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_13-调试android系统" tabindex="-1"><a class="header-anchor" href="#_13-调试android系统" aria-hidden="true">#</a> 13 调试Android系统</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell setprop debug.layout <span class="token boolean">true</span> <span class="token comment"># 显示UI边界</span>
adb shell setprop debug.hwui.overdraw show <span class="token comment"># 开启调试 GPU 过度绘制</span>
adb shell setprop debug.hwui.overdraw <span class="token boolean">false</span> <span class="token comment"># 关闭调试 GPU 过度绘制</span>
adb shell dumpsys package queryies <span class="token comment"># 查看设备中能直接访问的App</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_15-查询数据库" tabindex="-1"><a class="header-anchor" href="#_15-查询数据库" aria-hidden="true">#</a> 15 查询数据库</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>msm8953_64:/data/system <span class="token comment"># sqlite3 locksettings.db  # 打开数据库，获取数据库版本信息</span>
SQLite version <span class="token number">3.9</span>.2 <span class="token number">2017</span>-07-21 07:45:23 <span class="token comment"># 数据库版本信息</span>
Enter <span class="token string">&quot;.help&quot;</span> <span class="token keyword">for</span> usage hints.
sqlite<span class="token operator">&gt;</span> .tables <span class="token comment"># 显示所有的表信息</span>
android_metadata  locksettings
.mode <span class="token function">column</span> <span class="token comment">#列对齐命令</span>
.header on <span class="token comment">#打开表头显示</span>
sqlite<span class="token operator">&gt;</span> <span class="token keyword">select</span> * from locksettings<span class="token punctuation">;</span> <span class="token comment"># 查询整个表的信息</span>
<span class="token number">1</span><span class="token operator">|</span>lockscreen.disabled<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span><span class="token number">1</span>
<span class="token number">2</span><span class="token operator">|</span>migrated<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span><span class="token boolean">true</span>
<span class="token number">3</span><span class="token operator">|</span>migrated_user_specific<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span><span class="token boolean">true</span>
<span class="token number">4</span><span class="token operator">|</span>lockscreen.password_type_alternate<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span><span class="token number">0</span>
<span class="token number">5</span><span class="token operator">|</span>migrated_biometric_weak<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span><span class="token boolean">true</span>
<span class="token number">6</span><span class="token operator">|</span>migrated_lockscreen_disabled<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span><span class="token boolean">true</span>
<span class="token number">7</span><span class="token operator">|</span>lockscreen.enabledtrustagents<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span>
<span class="token number">8</span><span class="token operator">|</span>lockscreen.password_salt<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span>-970902998671653081
<span class="token number">9</span><span class="token operator">|</span>lockscreen.password_type<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span><span class="token number">262144</span>
<span class="token number">10</span><span class="token operator">|</span>lockscreen.profilechallenge<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span><span class="token number">1</span>
<span class="token number">11</span><span class="token operator">|</span>lockscreen.passwordhistory<span class="token operator">|</span><span class="token number">0</span><span class="token operator">|</span>
sqlite<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_16-获取显示当前正在显示的activity包名全路径" tabindex="-1"><a class="header-anchor" href="#_16-获取显示当前正在显示的activity包名全路径" aria-hidden="true">#</a> 16 获取显示当前正在显示的Activity包名全路径</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell dumpsys activity
adb shell <span class="token string">&quot;dumpsys activity | grep &quot;</span>Activity:<span class="token string">&quot;&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>回车之后，成功的话就会打印出很多信息，信息列表中关键字mResumedActivity后面的就是当前正在显示的应用包名+Activity名称</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mResumedActivity: ActivityRecord<span class="token punctuation">{</span>6c34898 u0 应用包名/Actiivty的名称 t77<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_17-activity操作" tabindex="-1"><a class="header-anchor" href="#_17-activity操作" aria-hidden="true">#</a> 17 Activity操作</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell am start 包名/.Activity <span class="token punctuation">(</span>要启动的Activity<span class="token punctuation">)</span> <span class="token comment"># 启动app</span>
adb shell am start <span class="token parameter variable">-W</span> <span class="token parameter variable">-n</span> 包名/.Activity <span class="token comment"># 启动app</span>
adb shell am start <span class="token parameter variable">-a</span> android.intent.action.MAIN <span class="token parameter variable">-n</span> <span class="token parameter variable">--ei</span> pid <span class="token number">10</span> <span class="token parameter variable">--es</span> str <span class="token string">&quot;helloworld&quot;</span>​​ <span class="token comment"># 传递key为pid数值为i整数类型0， 和key为str数值为字符串类型helloworld</span>
adb shell am force-stop 包名 <span class="token comment"># 关闭app</span>
adb shell pm <span class="token function">clear</span> 包名 <span class="token comment">#关闭app</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_18-service操作" tabindex="-1"><a class="header-anchor" href="#_18-service操作" aria-hidden="true">#</a> 18 Service操作</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell am startservice -n｛包<span class="token punctuation">(</span>package<span class="token punctuation">)</span>名｝/｛包名｝.<span class="token punctuation">{</span>服务<span class="token punctuation">(</span>service<span class="token punctuation">)</span>名称<span class="token punctuation">}</span>
adb shell am startservice <span class="token parameter variable">-n</span> com.android.traffic/com.android.traffic.maniservice
adb shell am start-foreground-service <span class="token parameter variable">-n</span> com.demo.screenrecorder/com.demo.screenrecorder.RecordService
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_19-发送广播" tabindex="-1"><a class="header-anchor" href="#_19-发送广播" aria-hidden="true">#</a> 19 发送广播</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell am broadcast <span class="token parameter variable">-a</span> android.intent.action.BOOT_COMPLETED <span class="token comment"># 发送系统启动完毕广播</span>
adb shell am broadcast <span class="token parameter variable">-a</span> android.intent.action.MEDIA_MOUNTED <span class="token comment"># 发送外部SD卡挂载广播</span>
adb shell am broadcast <span class="token parameter variable">-a</span> android.intent.action.MEDIA_UNMOUNTED <span class="token comment"># 发送外部SD卡拔出广播</span>
adb shell am broadcast <span class="token parameter variable">-a</span> car.meter.share.BROADCAST <span class="token comment"># 自定义录制视频广播 </span>
adb shell am broadcast <span class="token parameter variable">-a</span> com.leapmotor.share.reload.BROADCAST <span class="token comment"># 自定义途记分享广播</span>

adb shell am broadcast <span class="token parameter variable">-a</span> com.android.test <span class="token parameter variable">--es</span> test_string <span class="token string">&quot;this is test string&quot;</span> <span class="token parameter variable">--ei</span> test_int <span class="token number">100</span> <span class="token parameter variable">--ez</span> test_boolean <span class="token boolean">true</span>
<span class="token comment"># --es 表示使用字符串类型参数  --ei 表示int类型参数  --ez 表示boolean类型参数  第一个为key，第二个为value</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行结果如下，则表示广播发送成功：</p><h2 id="_20-查看网络信息" tabindex="-1"><a class="header-anchor" href="#_20-查看网络信息" aria-hidden="true">#</a> 20 查看网络信息</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell <span class="token function">ping</span> <span class="token parameter variable">-c</span> <span class="token number">4</span> ww.baidu.com <span class="token comment"># 测试两个网络间的连接和延迟</span>
adb shell <span class="token function">netstat</span> <span class="token comment"># 网络统计，用来查看网络当前状态。</span>
tcpdump <span class="token parameter variable">-p</span> <span class="token parameter variable">-vv</span> <span class="token parameter variable">-s</span> <span class="token number">0</span> <span class="token parameter variable">-w</span> /data/data/capture.pcap <span class="token comment"># 网络抓包，将tcpdump文件push进设备（shell下）</span>
tcpdump <span class="token parameter variable">-i</span> any <span class="token parameter variable">-s</span> <span class="token number">0</span> <span class="token parameter variable">-w</span> /data/data/capture.pcap <span class="token comment"># 网络抓包，将tcpdump文件push进设备（shell下）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_21-监听手机事件" tabindex="-1"><a class="header-anchor" href="#_21-监听手机事件" aria-hidden="true">#</a> 21 监听手机事件</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell getevent
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://img-blog.csdnimg.cn/cd0b059e5cd441d69581246c9bb17f1f.png" alt="点击事件"><br> 其中以<strong>003 0035</strong>和<strong>003 0036</strong> 开头的两条数据0x170和0x38E就是我们需要的x和y坐标了</p><h2 id="_22-模拟点击" tabindex="-1"><a class="header-anchor" href="#_22-模拟点击" aria-hidden="true">#</a> 22 模拟点击</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 模拟点击[x,y]坐标</span>
adb shell input mouse tap x y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_23-模拟滑动和模拟长按" tabindex="-1"><a class="header-anchor" href="#_23-模拟滑动和模拟长按" aria-hidden="true">#</a> 23 模拟滑动和模拟长按</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 从（x1，y1）滑动到（x2，y2）</span>
adb shell input swipe x1 y1 x2 y2 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 因为没有专门模拟长按的动作，所以我们使用滑动来模拟长按</span>
<span class="token comment"># 滑动初始位置与结束位置一致，且时间设置为500毫秒</span>
adb shell input swipe <span class="token number">300</span> <span class="token number">300</span> <span class="token number">300</span> <span class="token number">300</span> <span class="token number">500</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_24-模拟输入" tabindex="-1"><a class="header-anchor" href="#_24-模拟输入" aria-hidden="true">#</a> 24 模拟输入</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 输入‘string’</span>
adb shell input text <span class="token string">&#39;string&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注</strong>：需要先定位到对应的输入框，才可输入成功</p><h2 id="_25-模拟按键" tabindex="-1"><a class="header-anchor" href="#_25-模拟按键" aria-hidden="true">#</a> 25 模拟按键</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 模拟back 按键</span>
adb shell input keyevent  <span class="token number">4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>这里给出一个常用的keyevent code:</p><table><thead><tr><th>按键</th><th>按键Code码</th><th>描述</th></tr></thead><tbody><tr><td>KEYCODE_UNKNOWN</td><td>0</td><td></td></tr><tr><td>KEYCODE_SOFT_LEFT</td><td>1</td><td></td></tr><tr><td>KEYCODE_SOFT_RIGHT</td><td>2</td><td></td></tr><tr><td>KEYCODE_HOME</td><td>3</td><td>home键</td></tr><tr><td>KEYCODE_BACK</td><td>4</td><td>back键</td></tr><tr><td>KEYCODE_CALL</td><td>5</td><td></td></tr><tr><td>KEYCODE_ENDCALL</td><td>6</td><td></td></tr><tr><td>KEYCODE_0</td><td>7</td><td></td></tr><tr><td>KEYCODE_1</td><td>8</td><td></td></tr><tr><td>KEYCODE_2</td><td>9</td><td></td></tr><tr><td>KEYCODE_3</td><td>10</td><td></td></tr><tr><td>KEYCODE_4</td><td>11</td><td></td></tr><tr><td>KEYCODE_5</td><td>12</td><td></td></tr><tr><td>KEYCODE_6</td><td>13</td><td></td></tr><tr><td>KEYCODE_7</td><td>14</td><td></td></tr><tr><td>KEYCODE_8</td><td>15</td><td></td></tr><tr><td>KEYCODE_9</td><td>16</td><td></td></tr><tr><td>KEYCODE_STAR</td><td>17</td><td></td></tr><tr><td>KEYCODE_POUND</td><td>18</td><td></td></tr><tr><td>KEYCODE_DPAD_UP</td><td>19</td><td></td></tr><tr><td>KEYCODE_DPAD_DOWN</td><td>20</td><td></td></tr><tr><td>KEYCODE_DPAD_LEFT</td><td>21</td><td></td></tr><tr><td>KEYCODE_DPAD_RIGHT</td><td>22</td><td></td></tr><tr><td>KEYCODE_DPAD_CENTER</td><td>23</td><td></td></tr><tr><td>KEYCODE_VOLUME_UP</td><td>24</td><td></td></tr><tr><td>KEYCODE_VOLUME_DOWN</td><td>25</td><td></td></tr><tr><td>KEYCODE_POWER</td><td>26</td><td>电源键</td></tr><tr><td>KEYCODE_CAMERA</td><td>27</td><td></td></tr><tr><td>KEYCODE_CLEAR</td><td>28</td><td></td></tr><tr><td>KEYCODE_A</td><td>29</td><td></td></tr><tr><td>KEYCODE_B</td><td>30</td><td></td></tr><tr><td>KEYCODE_C</td><td>31</td><td></td></tr><tr><td>KEYCODE_D</td><td>32</td><td></td></tr><tr><td>KEYCODE_E</td><td>33</td><td></td></tr><tr><td>KEYCODE_F</td><td>34</td><td></td></tr><tr><td>KEYCODE_G</td><td>35</td><td></td></tr><tr><td>KEYCODE_H</td><td>36</td><td></td></tr><tr><td>KEYCODE_I</td><td>37</td><td></td></tr><tr><td>KEYCODE_J</td><td>38</td><td></td></tr><tr><td>KEYCODE_K</td><td>39</td><td></td></tr><tr><td>KEYCODE_L</td><td>40</td><td></td></tr><tr><td>KEYCODE_M</td><td>41</td><td></td></tr><tr><td>KEYCODE_N</td><td>42</td><td></td></tr><tr><td>KEYCODE_O</td><td>43</td><td></td></tr><tr><td>KEYCODE_P</td><td>44</td><td></td></tr><tr><td>KEYCODE_Q</td><td>45</td><td></td></tr><tr><td>KEYCODE_R</td><td>46</td><td></td></tr><tr><td>KEYCODE_S</td><td>47</td><td></td></tr><tr><td>KEYCODE_T</td><td>48</td><td></td></tr><tr><td>KEYCODE_U</td><td>49</td><td></td></tr><tr><td>KEYCODE_V</td><td>50</td><td></td></tr><tr><td>KEYCODE_W</td><td>51</td><td></td></tr><tr><td>KEYCODE_X</td><td>52</td><td></td></tr><tr><td>KEYCODE_Y</td><td>53</td><td></td></tr><tr><td>KEYCODE_Z</td><td>54</td><td></td></tr><tr><td>KEYCODE_COMMA</td><td>55</td><td></td></tr><tr><td>KEYCODE_PERIOD</td><td>56</td><td></td></tr><tr><td>KEYCODE_ALT_LEFT</td><td>57</td><td></td></tr><tr><td>KEYCODE_ALT_RIGHT</td><td>58</td><td></td></tr><tr><td>KEYCODE_SHIFT_LEFT</td><td>59</td><td></td></tr><tr><td>KEYCODE_SHIFT_RIGHT</td><td>60</td><td></td></tr><tr><td>KEYCODE_TAB</td><td>61</td><td></td></tr><tr><td>KEYCODE_SPACE</td><td>62</td><td></td></tr><tr><td>KEYCODE_SYM</td><td>63</td><td></td></tr><tr><td>KEYCODE_EXPLORER</td><td>64</td><td></td></tr><tr><td>KEYCODE_ENVELOPE</td><td>65</td><td></td></tr><tr><td>KEYCODE_ENTER</td><td>66</td><td></td></tr><tr><td>KEYCODE_DEL</td><td>67</td><td></td></tr><tr><td>KEYCODE_GRAVE</td><td>68</td><td></td></tr><tr><td>KEYCODE_MINUS</td><td>69</td><td></td></tr><tr><td>KEYCODE_EQUALS</td><td>70</td><td></td></tr><tr><td>KEYCODE_LEFT_BRACKET</td><td>71</td><td></td></tr><tr><td>KEYCODE_RIGHT_BRACKET</td><td>72</td><td></td></tr><tr><td>KEYCODE_BACKSLASH</td><td>73</td><td></td></tr><tr><td>KEYCODE_SEMICOLON</td><td>74</td><td></td></tr><tr><td>KEYCODE_APOSTROPHE</td><td>75</td><td></td></tr><tr><td>KEYCODE_SLASH</td><td>76</td><td></td></tr><tr><td>KEYCODE_AT</td><td>77</td><td></td></tr><tr><td>KEYCODE_NUM</td><td>78</td><td></td></tr><tr><td>KEYCODE_HEADSETHOOK</td><td>79</td><td></td></tr><tr><td>KEYCODE_FOCUS</td><td>80</td><td>Camera*focus</td></tr><tr><td>KEYCODE_PLUS</td><td>81</td><td></td></tr><tr><td>KEYCODE_MENU</td><td>82</td><td></td></tr><tr><td>KEYCODE_NOTIFICATION</td><td>83</td><td></td></tr><tr><td>KEYCODE_SEARCH</td><td>84</td><td></td></tr><tr><td>KEYCODE_MEDIA_PLAY_PAUSE</td><td>85</td><td></td></tr><tr><td>KEYCODE_MEDIA_STOP</td><td>86</td><td></td></tr><tr><td>KEYCODE_MEDIA_NEXT</td><td>87</td><td></td></tr><tr><td>KEYCODE_MEDIA_PREVIOUS</td><td>88</td><td></td></tr><tr><td>KEYCODE_MEDIA_REWIND</td><td>89</td><td></td></tr><tr><td>KEYCODE_MEDIA_FAST_FORWARD</td><td>90</td><td></td></tr><tr><td>KEYCODE_MUTE</td><td>91</td><td></td></tr></tbody></table><h2 id="_26-adb-shell-input" tabindex="-1"><a class="header-anchor" href="#_26-adb-shell-input" aria-hidden="true">#</a> 26 adb shell input</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Usage: input <span class="token punctuation">[</span><span class="token operator">&lt;</span>source<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>arg<span class="token operator">&gt;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>

The sources are:
      dpad
      keyboard
      mouse
      touchpad
      gamepad
      touchnavigation
      joystick
      touchscreen
      stylus
      trackball

The commands and default sources are:
      text <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token punctuation">(</span>Default: touchscreen<span class="token punctuation">)</span>
      keyevent <span class="token punctuation">[</span>--longpress<span class="token punctuation">]</span> <span class="token operator">&lt;</span>key code number or name<span class="token operator">&gt;</span> <span class="token punctuation">..</span>. <span class="token punctuation">(</span>Default: keyboard<span class="token punctuation">)</span>
      tap <span class="token operator">&lt;</span>x<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>y<span class="token operator">&gt;</span> <span class="token punctuation">(</span>Default: touchscreen<span class="token punctuation">)</span>
      swipe <span class="token operator">&lt;</span>x<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>y<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>x<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token operator">&lt;</span>y<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token punctuation">[</span>duration<span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>Default: touchscreen<span class="token punctuation">)</span>
      draganddrop <span class="token operator">&lt;</span>x<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>y<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>x<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token operator">&lt;</span>y<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token punctuation">[</span>duration<span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>Default: touchscreen<span class="token punctuation">)</span>
      press <span class="token punctuation">(</span>Default: trackball<span class="token punctuation">)</span>
      roll <span class="token operator">&lt;</span>dx<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>dy<span class="token operator">&gt;</span> <span class="token punctuation">(</span>Default: trackball<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,66),c={href:"https://blog.csdn.net/abc6368765/article/details/125220954",target:"_blank",rel:"noopener noreferrer"};function m(u,b){const n=e("ExternalLinkIcon");return d(),r("div",null,[o,s("p",null,[a("本文转自 "),s("a",c,[a("https://blog.csdn.net/abc6368765/article/details/125220954"),l(n)]),a("，如有侵权，请联系删除。")])])}const k=t(i,[["render",m],["__file","Adbchangyongmingling.html.vue"]]);export{k as default};
