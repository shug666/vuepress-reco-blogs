import{_ as e,r as p,o,c,b as a,d as n,e as t,a as i}from"./app-f541e591.js";const u={},l=i(`<p>找来找去，终于找到能够获取当前Activity名字的方法，需要用到无障碍服务AccessibilityService，在以下的方法中添加代码：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAccessibilityEvent</span><span class="token punctuation">(</span><span class="token class-name">AccessibilityEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">AccessibilityNodeInfo</span> source <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>source <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">CharSequence</span> packageName <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getEventType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> event<span class="token punctuation">.</span><span class="token constant">TYPE_WINDOW_STATE_CHANGED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token comment">//获取当前窗口activity名</span>
                <span class="token class-name">ComponentName</span> componentName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComponentName</span><span class="token punctuation">(</span>
                        event<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        event<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">String</span> activityName<span class="token operator">=</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getActivityInfo</span><span class="token punctuation">(</span>componentName<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    activityName<span class="token operator">=</span>activityName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>activityName<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>activityName<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;当前窗口activity&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;=================&quot;</span> <span class="token operator">+</span>activityName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PackageManager<span class="token punctuation">.</span>NameNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),k={href:"https://blog.csdn.net/wangbaochu/article/details/50554406",title:"Android 如何监控当前Foreground Activity，如何获知应用程序的启动_苍痕的博客-CSDN博客",target:"_blank",rel:"noopener noreferrer"},r={href:"https://blog.csdn.net/actionwind/article/details/118858034?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-2-118858034-blog-77651302.235%5Ev38%5Epc_relevant_default_base&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-2-118858034-blog-77651302.235%5Ev38%5Epc_relevant_default_base&utm_relevant_index=5",target:"_blank",rel:"noopener noreferrer"};function d(v,m){const s=p("ExternalLinkIcon");return o(),c("div",null,[l,a("p",null,[n("推荐参考阅读："),a("a",k,[n("Android 如何监控当前Foreground Activity，如何获知应用程序的启动_苍痕的博客-CSDN博客"),t(s)])]),a("p",null,[n("本文转自 "),a("a",r,[n("https://blog.csdn.net/actionwind/article/details/118858034?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-2-118858034-blog-77651302.235%5Ev38%5Epc_relevant_default_base&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-2-118858034-blog-77651302.235%5Ev38%5Epc_relevant_default_base&utm_relevant_index=5"),t(s)]),n("，如有侵权，请联系删除。")])])}const g=e(u,[["render",d],["__file","wuzhangaifuwuhuoqudangqianActivitydemingzi.html.vue"]]);export{g as default};
