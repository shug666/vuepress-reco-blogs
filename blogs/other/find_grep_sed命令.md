---
title: find grep sed查找命令
date: 2022-08-17
tags:
 - linux
categories: 
 - linux
sticky: 
   true
---

## find命令基本使用

**语法格式**：find [路径] [参数] [查找和搜索范围]

```
find /etc -name "*.conf“
```

**常用参数**：

| -name  | 按名称查找 |
| ------ | ---------- |
| -size  | 按大小查找 |
| -user  | 按属性查找 |
| -type  | 按类型查找 |
| -iname | 忽略大小写 |

## grep命令基本使用

Grep称为全局[正则表达式](https://so.csdn.net/so/search?q=正则表达式&spm=1001.2101.3001.7020)检索工具

**语法格式**：grep -option（参数） ‘word’（关键词） file（文本文件）；

```sh
grep "quail" /etc/passwd -n -s -r #显示行号，不显示错误信息，递归查找子目录文件
```

**grep常用参数：**

```sh
-e:		使用PATTERN作为模式。这可以用于指定多个搜索模式，或保护以连字符（- ）开头的图案。指定字符串做为查找文件内容的样式

-f:		指定规则文件，其内容含有一个或多个规则样式，让grep查找符合规则条件的文件内容，格式为每行一个规则样式
-w:		精准匹配字符串，必须完全符合，包含大小写下划线空格等
-i:		忽略大小写，可以和 -w 一起使用
-o:		参数只输出匹配到的字符串，不会输出匹配行中其他的信息
-r:		递归文件夹，从当前文件夹向下递归查找所有子文件夹中的文件（不包含链接文件，包含二进制文件，文本等）
-n:		匹配到具体字符串后，显示字符串在文本中的行数，或者是组合指令中显示匹配的字符串是在上一个指令输出的第几行
-R:		查找所有文件包含子目录
-s:		不显示错误信息	
```

重要参数(查询排除指定文件夹，或者二进制文件)：

```sh
--binary-file=without-match：   排除二进制文件查询。

--exclude=GLOB：      		跳过基本名称与GLOB匹配的文件（使用通配符匹配）。文件名GLOB可以使用 * 和[...]作为通配符，和\引用通配符或反斜杠字符。
		搜索其文件名和GLOB通配符相匹配的文件的内容来查找匹配使用方法： grep -H --exclude=c* "old" ./* c*是通配文件名的通配符./* 指定需要先通配文件名的文件的范围，必须要给*，不然就匹配不出内容，(如果不给*,带上-r选项也可以匹配)。
		
--exclude-dir=poky：     	跳过指定的目录，指定的poky目录下的任何文件都不会去查找。匹配一个目录下的很多内容的同时，还要让一些子目录不接受匹配，就使用此选项。
--exclude-from=FILE：    	跳过文件和目录匹配，跳过FILE（文件或者文件夹），但是这条指令在跳过文件夹时，没有直接使用--exclude-dir效率高。
--include=GLOB：      		仅搜索其基本名称与GLOB匹配的文件（使用--exclude下所述的通配符匹配）
```

grep 正则表达式主要参数：

```
\：   忽略正则表达式中特殊字符的原有含义
^：  匹配正则表达式的开始行
$：  匹配正则表达式的结束行
\<：  从匹配正则表达 式的行开始
\>：  到匹配正则表达式的行结束
[ ]：  单个字符，如[A]即A符合要求
[ - ]：  范围，如[A-Z]，即A、B、C一直到Z都符合要求
```

## Linux重定向

Linux中标准的输入设备是默认指的是键盘，标准的输出设备默认指的是显示器。

- 输入重定向：指的是重新指定设备来代替键盘作为新的输入设备。
- 输出重定向：指的是重新指定设备来代替显示器作为新的输出设备。

通常是用文件或命令的执行结果来代替键盘作为新的输入设备，而新的输出设备通常指的就是文件。

### 输入重定向

| 命令符号格式         | 作用                                                         |
| -------------------- | ------------------------------------------------------------ |
| 命令 < 文件          | 将指定文件作为命令的输入设备                                 |
| 命令 << 分界符       | 表示从标准输入设备（键盘）中读入，直到遇到分界符才停止（读入的数据不包括分界符），这里的分界符其实就是自定义的字符串 |
| 命令 < 文件1 > 文件2 | 将文件1作为命令的输入设备，该命令的执行结果输出到文件2中     |

### 输出重定向

输出重定向分为**标准输出重定向**和**错误输出重定向**两种技术。

| 命令符号格式                          | 作用                                                         |
| ------------------------------------- | ------------------------------------------------------------ |
| 命令 > 文件                           | 将命令执行的标准输出结果重定向输出到指定的文件中，如果该文件已包含数据，会清空原有数据，再写入新数据。 |
| 命令 2> 文件                          | 将命令执行的错误输出结果重定向到指定的文件中，如果该文件中已包含数据，会清空原有数据，再写入新数据。 |
| 命令 >> 文件                          | 将命令执行的标准输出结果重定向输出到指定的文件中，如果该文件已包含数据，新数据将写入到原有内容的后面。 |
| 命令 2>> 文件                         | 将命令执行的错误输出结果重定向到指定的文件中，如果该文件中已包含数据，新数据将写入到原有内容的后面。 |
| `命令 >> 文件2>&1` 或 `命令 &>> 文件` | 将标准输出或错误输出写入到指定文件，如果该文件中已包含数据，新数据将写入到原有内容的后面。注意。第一种格式中，最后的`2>&1`是一体的，可以认为是固定写法。 |

```sh
[root@localhost ~]# cat Linux.txt > demo.txt
[root@localhost ~]# cat demo.txt
Linux
[root@localhost ~]# cat Linux.txt > demo.txt
[root@localhost ~]# cat demo.txt
Linux     <--这里的 Linux 是清空原有的 Linux 之后，写入的新的 Linux
[root@localhost ~]# cat Linux.txt >> demo.txt
[root@localhost ~]# cat demo.txt
Linux
Linux     <--以追加的方式，新数据写入到原有数据之后
[root@localhost ~]# cat b.txt > demo.txt
cat: b.txt: No such file or directory  <-- 错误输出信息依然输出到了显示器中
[root@localhost ~]# cat b.txt 2> demo.txt
[root@localhost ~]# cat demo.txt
cat: b.txt: No such file or directory  <--清空文件，再将错误输出信息写入到该文件中
[root@localhost ~]# cat b.txt 2>> demo.txt
[root@localhost ~]# cat demo.txt
cat: b.txt: No such file or directory
cat: b.txt: No such file or directory  <--追加写入错误输出信息
```

## sed命令

`sed`命令采用流编辑模式，最明显的特点是，在`sed`处理数据之前，需要预先提供一组规则，`sed`会按照此规则来编辑数据。

`sed`会根据脚本命令来处理文本文件中的数据，这些命令要么从命令行中输入，要么存储在一个文本文件中，此命令执行数据的顺序如下：

1. 每次仅读取一行内容；
2. 根据提供的规则命令匹配并修改数据。注意，`sed`默认不会直接修改源文件数据，而是会将数据复制到缓冲区中，修改也仅限于缓冲区中的数据；
3. 将执行结果输出；

将一行数据匹配完成后，它会继续读取下一行数据，并重复这个过程，直到将文件中所有数据处理完毕。

`sed`命令的基本格式如下：

```shell
[root@localhost ~]# sed [选项] [脚本命令] 文件名
```

下表是`sed`命令常用选项及含义

| 选项        | 含义                                                         |
| ----------- | ------------------------------------------------------------ |
| -e 脚本命令 | 该选项会将其后的脚本命令添加到已有的命令中。（多点编辑）     |
| -f 脚本命令 | 该选项会将其后文件中的脚本命令添加到已有的命令中。           |
| -n          | 默认情况下，`sed`命令会将STDIN的数据输出到终端上。但如果加上`-n`参数，则只有经过`sed`特殊处理的那一行才会被列出来。 |
| -i          | 此选项会直接修改源文件，要慎用。                             |

脚本命令说明

`[n1,[n2]] function`

`n1,n2：`不见得会存在，一般代表**选择进行动态的行数**，举例来说，如果我的动作需要在10到20行之间进行，则`10,20[动作行为]`

| 选项 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| a    | 新增，a的后面可以接字符串，而这些字符串会在新的一行出现（当前的下一行） |
| c    | 取代，c的后面可以接字符串，这些字符串可以取代n1,n2之间的行   |
| d    | 删除                                                         |
| i    | 插入，i的后面可以接字符串，这些字符串在目前的上一行出现      |
| s    | 取代，可以直接进行取代的工作，这个s的动作可以搭配正则表达式。 |
| p    | 打印，将某个选择的数据打印出来                               |

**`sed`后面接的动作，务必以“两个单引号”括住。**

```sh
sed 's/要被取代的字符串/新的字符串/g'

#替换22为55
cat sed|sed 's#22#55#g'
```

## 参考链接

**[Linux重定向，grep，sed，awk命令](https://blog.csdn.net/qq_36553387/article/details/117715160)**

**[见博客参考连接grep的使用](https://blog.csdn.net/m0_50668851/article/details/108473882)**

