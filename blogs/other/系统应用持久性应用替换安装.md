---
title: 系统应用替换安装
date: 2022-09-03
tags:
 - adb命令
categories: 
 - adb命令
sticky: 
   true
---

adb install 报[INSTALL_FAILED_INVALID_APK],apk是一个持久性应用程序,持久性应用程序是不可更新的。

## 电视开机时按住esc进入bootcode模式

```sh
env set OEMLock off  #关闭OEM锁
env save #保存配置
env reset #重启TV
```

## 将System挂载后即可进行替换

```sh
$adb root  $获取root权限

$adb disable-verity  #关闭分区检测功能

$adb reboot  #执行adb disable-verity后需要重启设备

$adb root   #设备重启后再次获取root权限

$adb remount  #使system分区为可读可写模式，mount -o remount,rw /或者mount -o rw,remount /system

$adb push TopTechTvService.apk /system/app/TopTechTvService #替换原来的文件

$adb shell 	#然后进入/system/app/TopTechTvService目录

$sync	#更新缓冲区

$reboot 
```

## adb shell sync 命令和adb sync命令的区别

adb shell sync 命令：

```
1，在shell中执行
2，将内存缓冲区中的数据 写入到磁盘
```

adb sync 命令：
命令意思：同步更新/data/或/system/下的数据

命令用法：adb sync [directory]

如果不指定目录，将同步更新/data/和/system/

## adb shell打开开发者选项

1.如果是正常的手机或者平板的Settings版本可以使用：

```sh
$am start -n com.android.settings/com.android.settings.DevelopmentSettings
```

2.如果是电视的TVSettings版本可以使用：

```sh
$am start -n com.android.tv.settings/com.android.tv.settings.system.development.DevelopmentActivity
```

以上都是RK平台的

## 安卓手机解锁

提示：Device is locked. Please unlock the device first

1.首先需要打开开发者模式中的OEM unlocking开关

![img](https://raw.githubusercontent.com/shug666/image/main/images/20190413180428685.png)

2.adb reboot bootloader

3.fastboot flashing unlock

4.fastboot getvar unlocked

等待结果 一般会出现unlocked：yes
